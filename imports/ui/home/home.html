<template name='home'>
    {{#contentFor "headerTitle"}}
    <h1 class="title">Accueil</h1>
    {{/contentFor}}
    {{#contentFor "headerButtonLeft"}}
    <button class="button button-clear pull-left" data-ion-menu-toggle="left">
        {{#if isAndroid}}
        {{> ionIcon icon='android-more-vertical'}}
        {{else}}
        {{> ionIcon icon='navicon'}}
        {{/if}}
    </button>
    {{/contentFor}}
    {{#contentFor "headerButtonRight"}}

    <button class="button button-clear icon ion-android-notifications brand-base-text-color pull-right all-seen"
        data-ion-menu-toggle="right">
        {{#transition in="bounceInDown" out="bounceOutUp"}}
        {{#if notificationsCount}}
        <div class="new-notification-bubble animated out">{{notificationsCount}}</div>
        {{/if}}
        {{/transition}}
    </button>
    {{/contentFor}}

    {{#ionView}}
    {{#ionContent class="scroll-bg"}}
    <div class="list">

        <div class="item item-light item-divider">
            <div class="row row-center row-no-padding">
                <div class="col col-center">
                    <i class="icon ion-ios-home"></i> Accueil
                </div>
                <!-- <div class="col-30 col-center text-left">

            <select name="sortByDay" id="sortByDay" class="item item-light item-input item-select">
              <option value="">Trier par jour</option>
              <option value="lundi">lundi</option>
              <option value="mardi">mardi</option>
              <option value="mercredi">mercredi</option>
              <option value="jeudi">jeudi</option>
              <option value="vendredi">vendredi</option>
              <option value="samedi">samedi</option>
              <option value="dimanche">dimanche</option>
            </select>
  

        </div> -->
            </div>
        </div>
       



        {{#if dataReadyScopeDetail}}

        {{> Template.dynamic template="listProjectsEventsRafHome" data=scope}}

        {{/if}}
    </div>
    {{/ionContent}}
    {{/ionView}}
</template>

<template name="listProjectsEventsRafHome">
    <div class="item item-divider">
        <i class="icon fa fa-calendar"></i> {{__ "events"}} <span
            class="badge badge-dark">{{countProjectsEventsCreator}}</span>
    </div>

    {{#each item in listProjectsEventsCreator}}

      {{#with item}}
      <a class="item {{#if profilThumbImageUrl}}item-thumbnail-left{{/if}}"
          href="{{#if equals scopeVar 'gamesmobile'}}{{pathFor 'gamesDetail' _id=_id._str}}{{else}}{{pathFor 'actionsList' _id=_id._str scope=scopeVar}}{{/if}}">
          {{#if profilThumbImageUrl}}
          <img src="{{urlImageCommunecter}}{{profilThumbImageUrl}}">
          {{/if}}
          <h2>{{name}}</h2>
          {{#if actionsCount.todo}}
          <span class="badge {{#if isStart}}badge-balanced{{else}}badge-dark{{/if}}"><i class="icon fa fa-inbox"></i>
              {{actionsCount.todo}}</span>
          {{/if}}

          {{#if typeValue}}
          <p>{{typeValue}}</p>
          {{/if}}

          {{#if organizerEvent}}
          <p>Projet :
              {{#each organizerItem in organizerEvent}}
              {{#each organizerItemValue in organizerItem.values}}
              <a href="{{pathFor 'detailList' _id=organizerItemValue._id._str scope=organizerItem.type}}"
                  class="positive">{{organizerItemValue.name}}</a>
              {{/each}}
              {{/each}}
          </p>
          {{/if}}


          {{#if startDate}}
          <p>
              {{#if isStart}}
              <i class="icon ion-android-alarm-clock"></i> {{__ "start"}} : {{livestamp startDate}} <br>
              {{#if endDate}}
              <i class="icon ion-android-alarm-clock"></i> {{__ "end"}} : {{livestamp endDate}} <br>
              <i class="icon ion-android-time"></i> {{__ "duration"}} : {{diffInText startDate endDate}}<br>
              {{/if}}
              {{else}}
              <i class="icon ion-android-alarm-clock"></i> {{__ "start"}} : {{livestamp startDate}} <br>
              {{#if endDate}}
              <i class="icon ion-android-time"></i> {{__ "duration"}} : {{diffInText startDate endDate}}<br>
              {{/if}}
              {{/if}}
          </p>
          {{/if}}
      </a>
      {{/with}}
    {{/each}}


</template>

<template name="itemAction">

    {{> itemInputAction action=action}}

</template>

<template name="itemInputAction">
    <div class="item">
        <div class="row row-center padding-bottom">
            <div class="col">{{> actionDate action=action}}</div>
        </div>
        <div class="row row-center padding-bottom">
            {{> actionParticipantNeeded action=action}}
            {{> actionDuration action=action }}
        </div>
        <div class="row row-center">
            <div class="col-90 col-center">
                <a href="{{pathFor 'actionsDetail' _id=action.parentId scope=action.parentType roomId=action.idParentRoom actionId=action._id._str}}"
                    class="subdued dark item-content">{{action.name}}</a>
            </div>
            <div class="col-10">
                {{#if displayDesc}}
                <div class="button button-small display-desc-js"> <i class="icon ion-ios-arrow-up"></i> </div>
                {{else}}
                <div class="button button-small display-desc-js"> <i class="icon ion-ios-arrow-down"></i> </div>
                {{/if}}
            </div>
        </div>

        {{#if displayDesc}}
        <div div class="col ">
            {{#if action.creditPositive}}
            <div class="row">
                <div class="col-10"><i class="icon ion-card"> </i></div>
                <div class="col">Vous gagnerez {{action.credits}} crédits</div>
            </div>
            {{else}}
            <div class="row">
                <div class="col-10"><i class="icon ion-card"> </i></div>
                <div class="col">Vous serez prélevé de
                    {{action.creditNegative}} crédits</div>
            </div>
            {{/if}}
            <div class="row">
                <div class="col-10"> <i class="ion-android-calendar"></i></div>
                <div class="col">Début le
                    {{action.projectDay}}</div>
            </div>
            <div class="row">
                <div class="col-10"><i class="ion-clock"></i></div>
                <div class="col">Durée
                    {{action.projectDuration}} H</div>
            </div>
            <div class="row">
                <div class="col-10"><i class="ion-man"></i></div>
                <div class="col">Il y a {{action.actionParticipantsNbr}}
                    participant</div>
            </div>
            <div class="row row-wrap">
                <div class="col-10"> <i class="icon ion-ios-arrow-down"></i></div>
                <div class="col item-text-wrap ">Pour un besoin minimum de
                    {{action.min}} participant</div>
            </div>
            <div class="row">
                <div class="col-10"><i class="icon ion-ios-arrow-up"></i></div>
                <div class="col">Et un maximum de {{action.max}}
                    participant</div>
            </div>
        </div>
        {{/if}}
        <div class="row">
            {{>buttonSubscribeAction action }}
        </div>
    </div>
</template>

<template name="itemInputActionDetail">
    <div class="item">
        <div class="row row-center padding-bottom">
            {{> actionParticipantNeeded action=action}}
            {{> actionDuration action=action }}
        </div>

        <div div class="col ">
                {{#if action.creditPositive}}
                <div class="row">
                    <div class="col-10"><i class="icon ion-card"> </i></div>
                    <div class="col">Vous gagnerez {{action.credits}} crédits</div>
                </div>
                {{else}}
                <div class="row">
                    <div class="col-10"><i class="icon ion-card"> </i></div>
                    <div class="col">Vous serez prélevé de
                    {{action.creditNegative}} crédits</div>
                </div>
                {{/if}}
                <div class="row">
                    <div class="col-10"> <i class="ion-android-calendar"></i></div>
                    <div class="col">Début le
                    {{action.projectDay}}</div>
                </div>
                <div class="row">
                    <div class="col-10"><i class="ion-clock"></i></div>
                    <div class="col">Durée
                    {{action.projectDuration}} H</div>
                </div>
                <div class="row">
                    <div class="col-10"><i class="ion-man"></i></div>
                    <div class="col">Il y a {{action.actionParticipantsNbr}}
                    participant</div>
                </div>
                <div class="row row-wrap">
                    <div class="col-10"> <i class="icon ion-ios-arrow-down"></i></div>
                    <div class="col item-text-wrap ">Pour un besoin minimum de
                    {{action.min}} participant</div>
                </div>
                <div class="row">
                    <div class="col-10"><i class="icon ion-ios-arrow-up"></i></div>
                    <div class="col">Et un maximum de {{action.max}}
                    participant</div>
                </div>
        </div>
    </div>
    {{>buttonSubscribeAction action }}
    
</template>

<template name="buttonSubscribeAction">

{{#if isContributors}}
<div class="col col-center text-center">
    <span class="balanced"><i class="fa fa-check"></i> {{__ "dda.actions.youparticipatingaction"}}</span>
</div>
{{else}}
{{#if isAFaire}}
{{#if isNotMax}}
<div class="button-bar bar-positive padding-top">
    <button class="button action-assignme-js {{#if isCall}}disabled{{/if}}">
        {{#if isCall}}
        <i class="icon fa fa-refresh fa-spin"></i>
        {{else}}
        <i class="fa fa-handshake-o"></i>
        {{/if}}
        {{__ "dda.actions.wantparticipateaction"}}</button>
</div>
{{else}}
<div class="item">
    <span class="balanced"><i class="fa fa-check"></i> Déja complet</span>
</div>
{{/if}}
{{else}}
{{#if isDepense}}
{{#if isNotMax}}
<div class="button-bar bar-positive padding-top">
    <button class="button action-depenseme-js {{#if isCall}}disabled{{/if}}">
        {{#if isCall}}
        <i class="icon fa fa-refresh fa-spin"></i>
        {{else}}
        <i class="ion-card"></i>
        {{/if}}
        Dépenser {{credits}}</button>
</div>
{{else}}
<div class="item">
    <span class="balanced"><i class="fa fa-check"></i> Déja complet</span>
</div>
{{/if}}
{{/if}}

{{/if}}
{{/if}}
</template>

<template name="actionDuration">
    <div class="col text-center col-center borderMenuItem stable-border"><i class="ion-clock"></i>
        {{action.projectDuration}}H </div>
    <div class="col text-center col-center borderMenuItem stable-border"><i class="icon ion-card"></i>
        {{action.credits}}
        R</div>
</template>

<template name="actionParticipantNeeded">
    <div class="col text-center col-center borderMenuItem stable-border"><i class="icon ion-man"></i>
        {{action.actionParticipantsNbr}}</div>
    <div class="col text-center col-center borderMenuItem stable-border"><i class="icon ion-ios-arrow-down"></i>
        {{action.min}}</div>
    <div class="col text-center col-center borderMenuItem stable-border"><i class="icon ion-ios-arrow-up"></i>
        {{action.max}}</div>
</template>

<template name="actionDate">
    <span><i class="ion-android-calendar"></i>{{action.projectDay}}</span>
</template>

<template name="linkForAction">
    <b><a
            href="{{pathFor 'actionsDetail' _id=action.parentId scope=action.parentType roomId=action.idParentRoom actionId=action._id._str}}">{{action.name}}</a>
    </b> <br>
</template>


