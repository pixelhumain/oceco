

<template name='homeView'>
    {{#contentFor "headerTitle"}}
    <h1 class="title">Accueil</h1>
    {{/contentFor}}
    {{#contentFor "headerButtonLeft"}}
    <button class="button button-clear pull-left" data-ion-menu-toggle="left">
        {{#if isAndroid}}
        {{> ionIcon icon='android-more-vertical'}}
        {{else}}
        {{> ionIcon icon='navicon'}}
        {{/if}}
    </button>
    {{/contentFor}}
    {{#contentFor "headerButtonRight"}}

    <button class="button button-clear icon ion-android-notifications brand-base-text-color pull-right all-seen"
        data-ion-menu-toggle="right">
        {{#transition in="bounceInDown" out="bounceOutUp"}}
        {{#if notificationsCount}}
        <div class="new-notification-bubble animated out">{{notificationsCount}}</div>
        {{/if}}
        {{/transition}}
    </button>
    {{/contentFor}}

    {{#ionView}}
    {{#ionContent class="scroll-bg"}}

    {{#if settingOceco}}

    {{#if scope.isMembers}}
    {{#if settingOceco.pole}}
    {{#if settingOceco.home}}
    {{> scrollPrez title=settingOceco.home.textTitre prez=settingOceco.home.textInfo icon="ion-home"}}
    {{else}}
    {{> scrollPrez title='Choix du pole' prez='Sur cette page vous devrez choisir parmis les differents poles de votre organisation afin de voir les évenements et les actions qui en font partie. Si vous voulez voir les évenement par date merci de vous rendre dans "agenda"' icon="ion-home"}}
    {{/if}}
    {{else}}
    {{#if settingOceco.home}}
    {{> scrollPrez title=settingOceco.home.textTitre prez=settingOceco.home.textInfo icon="ion-home"}}
    {{else}}
    {{> scrollPrez title='Choix' prez='' icon="ion-home"}}
    {{/if}}
    {{/if}}

    {{#if settingOceco.pole}}

    {{#each poles in RaffineriePoles}}
    <a href="{{pathFor 'polesView' pole=poles scope='project'}}" class="item">
        {{poles}}
    </a>
    {{/each}}

    {{else}}

    
    {{>projectsView}}

    {{/if}}
    {{else}}
    
    {{> scrollPrez title='Membre' prez='Vous devez être un membre validé par un administrateur de l\'organisation' icon="ion-home"}}
    
    {{#if scope.toBeValidated}}
    <button class="button button-block disabled">
        <i class="icon fa fa-hourglass-half"></i> {{__ "Pending"}}
    </button>
    {{else}}
    {{#if scope.isInviting 'members' currentUser._id}}
    <button class="button button-block disabled">
        <i class="icon fa fa-hourglass-half"></i> {{__ "Pending"}}
    </button>
    {{else}}
    {{> Bouton_card id=scope._id._str scope=scope.scopeVar isConnect=scope.isMembers classOff="button-block connectscope-link" classOn="button-block disconnectscope-link" iconOff="fa fa-link" iconOn="fa fa-unlink" titleOn="Ne plus être membre de l'organisation" titleOff="Devenir membre de l'organisation"}}
    {{/if}}
    {{/if}}
    
    {{/if}}

    {{else}}

    {{/if}}

    {{/ionContent}}
    {{/ionView}}
</template>

<template name="searchActions">
    <label class="item item-input">
        <i class="icon ion-search placeholder-icon"></i>
        <input id="search" type="text" placeholder="Chercher une action par nom, #tag, :projet..." value="{{search}}">
    </label>
    {{#if searchTag}}
    <div class="item item-divider">
        Filtrer par tags
    </div>
    {{#each allTags}}
    <div class="item item-icon-left item-positive searchtag-js">
    <i class="icon fa fa-tag"></i> {{this}}
    </div>
    {{/each}}
    {{/if}}
    {{#if searchHelp}}
    <div class="item item-divider">
        Filtrer les actions
    </div>
    <a class="item item-dark item-icon-left searchfilter-js" data-action="?c">
        <i class="icon fa fa-filter"></i> avec contributeurs : <code>?c</code>
    </a>
    <a class="item item-dark item-icon-left searchfilter-js" data-action="?nc">
        <i class="icon fa fa-filter"></i> sans contributeurs : <code>?nc</code>
    </a>
    <a class="item item-dark item-icon-left searchfilter-js" data-action="?me">
        <i class="icon fa fa-filter"></i> ou je suis contributeurs : <code>?me</code>
    </a>
    {{/if}}
</template>

<template name='projectsView'>
    {{#if dataReady}}
    {{>searchActions}}
    <div class="list">
        {{>organizationList}}
      {{#each project in poleProjects2}}
        {{>projectList2 project=project}}
      {{/each}} 
      </div>
      {{/if}}
</template>
